<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>malaika handa</title>
    <link rel="stylesheet" href="/styles/styles.css">
</head>
<body>
    <section id="bio">
        <p><span id="intro">My name is Malaika Handa and I've made <span id="crossword-count">lots of</span> crossword puzzles.</span> You'll find me in <a href="https://www.vulture.com/2022/01/introducing-the-vulture-10x10-daily-crossword-puzzle.html" target="_blank">Vulture magazine</a> several days a week, and writing for <a href="https://rexwordpuzzle.blogspot.com/p/frequently-asked-questions-i-get-lots.html" target="_blank">rexwordpuzzle</a> about once a month. I'm also sporadically published in other outlets (see below); if you'd like to get an email when that happens, <a href="https://groups.google.com/g/girlbosswords" target="_blank">sign up here</a>. In the past, I ran <a href="https://www.7xwords.com/" target="_blank">the 7xwords project</a> and blogged for <a href="https://crosswordfiend.com/" target="_blank">Diary of a Crossword Fiend</a>.</p>
        <p>When I'm not crossword-ing, I write code, play volleyball, teach high schoolers computer science, drink cocktails, and <a href="https://tinyurl.com/malaikas-romance-recs" target="_blank">read romance novels</a>. Find me on <a href="https://x.com/malisolves" target="_blank">Twitter</a>, <a href="https://bsky.app/profile/malaika-h.bsky.social" target="_blank">bluesky</a> or <a href="https://www.instagram.com/malihanda/" target="_blank">Instagram</a>. Or, email works too: handa malaika at gmail dot com.</p>
    </section>
    <section id="calendar-chart">
        <div id="filter-controls-area"></div>
        <div id="chart-container"></div>
        <div id="tooltip" class="tooltip"></div>
        <div id="details-panel" class="details-panel"></div>
    </section>
    <section id="footer">
        <p>This website was built by <a href="https://parkerhiggins.net" target="_blank">Parker</a>.</p>
    </section>
    <script type="module">

        import { DetailsPanel } from './js/details-panel.js';
        import { CalendarChart } from './js/chart.js';
        import { FilterSystem } from './js/filter-system.js';

        const colorConditions = [
            {
                // Full-size or oversized puzzles get color-4
                condition: (date) => date.records.some(r => r.category === 'puzzle' &&
                    (r.size === 'full-size' || r.size === 'oversized')),
                colorClass: 'color-4'
            },
            {
                // Misc entries get color-3
                condition: (date) => date.records.some(r => r.category === 'misc'),
                colorClass: 'color-3'
            },
            {
                // Any records get color-2
                condition: (date) => date.records.length > 0,
                colorClass: 'color-2'
            },
            {
                // Default gets color-1 (lowest priority)
                condition: () => true,
                colorClass: 'color-1'
            }
        ];

        const tooltipTemplate = (date) => 
            `<strong>${date.date}</strong>\n${
                date.records
                    .filter(r => r.category === 'misc')
                    .map(item => `<strong>${item.publication}</strong> [${item.type}]: ${item.title}`)
                    .join('\n')
            }${
                date.records.filter(r => r.category === 'misc').length > 0 && 
                date.records.filter(r => r.category === 'puzzle').length > 0 ? '\n' : ''
            }${
                date.records
                    .filter(r => r.category === 'puzzle')
                    .map(puzzle => `<strong>${puzzle.publication}</strong>: ${puzzle.title}${
                        puzzle.collaborator ? ` with ${puzzle.collaborator}` : ''
                    } (${puzzle.size}, ${puzzle.type})`)
                    .join('\n')
            }`;

        // Initialize the chart with options
        const chart = new CalendarChart("chart-container", {
            colorConditions: colorConditions,
            tooltipTemplate: tooltipTemplate
        });
        
        // Load and render initial data
        await chart.loadData('/data.json');
        chart.render();

        document.querySelector('#crossword-count').innerHTML = chartData.records.filter((r) => r.category === "puzzle").length

        const filterConfig = [
            {'id': 'publication', 'label': 'Publication'},
            {'id': 'collaborator', 'label': 'Collaborator', includeAny: true},
            {'id': 'type', 'label': 'Type'}
        ];

        const filterSystem = new FilterSystem(chartData.records, filterConfig);
        filterSystem.populateFilterControls("filter-controls-area");

        const detailsPanelManager = new DetailsPanel('details-panel');
        detailsPanelManager.init(chart);

    </script>
</body>
</html> 
